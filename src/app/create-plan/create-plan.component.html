<div class="page-container">
  <mat-toolbar color="primary" class="toolBar">
    <span class="example-toolbar-title">Meditrack</span>

    <button mat-icon-button color="link" (click)="goToHome()" >
      <mat-icon>home</mat-icon>
    </button>
  </mat-toolbar>

  <div class="container">

  <form (ngSubmit)="createPlan()" class="form-container">
    <h2> Crea Piano </h2>
    <div class="form-group">
      <div *ngIf="sessionStorage.getItem('userType') === 'doctor'">
        <mat-form-field >
          <mat-label>Patient username</mat-label>
          <input matInput type="text" class="form-control" placeholder="Inserisci username" id="patientUsername" name="patientUsername" required [(ngModel)]="planData.patientUsername">
        </mat-form-field>
      </div>
      <mat-form-field >
        <mat-label>Plan Name:</mat-label>
        <input matInput type="text" class="form-control" placeholder="Inserisci Plan Name" id="planName" name="planName" required [(ngModel)]="planData.name">
      </mat-form-field>
      <mat-form-field >
        <mat-label>Length in days:</mat-label>
        <input matInput type="number" class="form-control" placeholder="Inserisci Plan's lenght " id="planLength" name="planLength" required [(ngModel)]="planData.planLength">
      </mat-form-field>
      <mat-form-field >
        <mat-label>Tipo Di Piano Teraupetico</mat-label>
        <input matInput type="text" class="form-control" placeholder="Inserisci Tipo Piano " id="planType" name="planType" required [(ngModel)]="planData.type">
      </mat-form-field>
    </div>



    <button mat-raised-button type="submit" color="primary"  >Create plan</button>
  </form>


  <div class="table-container" *ngIf="sessionStorage.getItem('userType') === 'doctor'">
      <h2> Pazienti Attualmente Disponibili </h2>
      <table mat-table  [dataSource]="user.patients" class="doctors-table">

        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef> Username </th>
          <td mat-cell *matCellDef="let patient"> {{ patient.username }} </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let patient"> {{ patient.name }} </td>
        </ng-container>

        <ng-container matColumnDef="surname">
          <th mat-header-cell *matHeaderCellDef> Surname </th>
          <td mat-cell *matCellDef="let patient"> {{ patient.surname }} </td>
        </ng-container>

        <ng-container matColumnDef="cf">
          <th mat-header-cell *matHeaderCellDef> Codice Fiscale </th>
          <td mat-cell *matCellDef="let patient"> {{ patient.cf }} </td>
        </ng-container>

        <ng-container matColumnDef="tscode">
          <th mat-header-cell *matHeaderCellDef> Tessera Sanitaria code </th>
          <td mat-cell *matCellDef="let patient"> {{ patient.tscode }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>
</div>

