<mat-toolbar color="primary">
  <span class="example-toolbar-title">Meditrack</span>
  <button (click)="goToHome()">Home</button>

</mat-toolbar>

<form (ngSubmit)="createPlan()" class="page-container ">
  <div *ngIf="sessionStorage.getItem('userType') === 'doctor'" class="form-group">

    <mat-form-field >
      <mat-label>Patient username</mat-label>
      <input matInput type="text" class="form-control" placeholder="Inserisci username" id="patientUsername" name="patientUsername" required [(ngModel)]="planData.patientUsername">
    </mat-form-field>
    <mat-form-field >
      <mat-label>Plan Name:</mat-label>
      <input matInput type="text" class="form-control" placeholder="Inserisci Plan Name" id="planName" name="planName" required [(ngModel)]="planData.name">
    </mat-form-field>
    <mat-form-field >
      <mat-label>Length in days:</mat-label>
      <input matInput type="number" class="form-control" placeholder="Inserisci Plan's lenght " id="planLength" name="planLength" required [(ngModel)]="planData.planLength">
    </mat-form-field>
    <mat-form-field >
      <mat-label>Tipo Di Piano Teraupetico</mat-label>
      <input matInput type="text" class="form-control" placeholder="Inserisci Tipo Piano " id="planType" name="planType" required [(ngModel)]="planData.type">
    </mat-form-field>

  </div>

  <button type="submit">Create plan</button>
</form>

<!--form (ngSubmit)="createPlan()">
  <div *ngIf="sessionStorage.getItem('userType') === 'doctor'" class="form-group">
    <label for="patientUsername">Patient username:</label>
    <input type="text" class="form-control" placeholder="Enter patient's username" id="patientUsername" name="patientUsername" [(ngModel)]="planData.patientUsername">
  </div>
  <div class="form-group">
    <label for="planName">Name:</label>
    <input type="text" class="form-control" placeholder="Enter plan's name" id="planName" name="planName" [(ngModel)]="planData.name">
  </div>
  <div class="form-group">
    <label for="planLength">Length in days:</label>
    <input type="number" class="form-control" placeholder="Enter plan's length in days" id="planLength" name="planLength" [(ngModel)]="planData.planLength">
  </div>
  <div class="form-group">
    <label for="planType">Type:</label>
    <input type="text" class="form-control" placeholder="Enter plan's type" id="planType" name="planType" [(ngModel)]="planData.type">
  </div>


</form-->

<!--h2> Tabella pazienti  </h2>

<table class="table table-striped">
  <thead>
  <tr>
    <th>Username</th>
    <th>Name</th>
    <th>Surname</th>
    <th>Codice Fiscale</th>
    <th>Tessera Sanitaria code</th>
  </tr>
  </thead>
  <tbody *ngIf="user.patients">
  <tr *ngFor="let pat of user.patients" [attr.id]="'r' + pat.username">
    <td>{{pat.username}}</td>
    <td>{{pat.name}}</td>
    <td>{{pat.surname}}</td>
    <td>{{pat.cf}}</td>
    <td>{{pat.tscode}}</td>
  </tr>
  </tbody>
</table-->

<table mat-table class="mat-elevation-z8" [dataSource]="user.patients">

  <ng-container matColumnDef="username">
    <th mat-header-cell *matHeaderCellDef> Username </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.username }} </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Name </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.name }} </td>
  </ng-container>

  <ng-container matColumnDef="surname">
    <th mat-header-cell *matHeaderCellDef> Surname </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.surname }} </td>
  </ng-container>

  <ng-container matColumnDef="cf">
    <th mat-header-cell *matHeaderCellDef> Codice Fiscale </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.cf }} </td>
  </ng-container>

  <ng-container matColumnDef="tscode">
    <th mat-header-cell *matHeaderCellDef> Tessera Sanitaria code </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.tscode }} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

